{% extends 'base.html.twig' %}

{% block title %}Categories
{% endblock %}

{% block body %}
	<h1>Categories</h1>

	<button type="button" class="btn btn-primary" data-toggle="modal" data-target="#categoryModal">
		Add New Category
	</button>

	<table class="table mt-3">
		<thead>
			<tr>
				<th>Name</th>
				<th>Description</th>
				<th>Actions</th>
			</tr>
		</thead>
		<tbody>
			{% for category in categories %}
				<tr>
					<td>{{ category.name }}</td>
					<td>{{ category.description }}</td>
					<td>
						<a href="{{ path('admin_category_edit', {'id': category.id}) }}" class="btn btn-warning">Edit</a>
						<a href="{{ path('admin_category_delete', {'id': category.id}) }}" class="btn btn-danger" onclick="return confirm('Are you sure?')">Delete</a>
					</td>
				</tr>
			{% endfor %}
		</tbody>
	</table>

	<!-- Modal -->
	<div class="modal fade" id="categoryModal" tabindex="-1" role="dialog" aria-labelledby="categoryModalLabel" aria-hidden="true">
		<div class="modal-dialog" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title" id="categoryModalLabel">New Category</h5>
					<button type="button" class="close" data-dismiss="modal" aria-label="Close">
						<span aria-hidden="true">&times;</span>
					</button>
				</div>
				<div class="modal-body">
					{{ form_start(form, {'attr': {'id': 'categoryForm'}}) }}

					<div class="form-group">
						{{ form_label(form.name) }}
						{{ form_widget(form.name, {'attr': {'class': 'form-control'}}) }}
						{{ form_errors(form.name) }}
					</div>

					<div class="form-group">
						{{ form_label(form.description) }}
						{{ form_widget(form.description, {'attr': {'class': 'form-control'}}) }}
						{{ form_errors(form.description) }}
					</div>

					{{ form_end(form, { 'render_rest': false }) }}
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
					<button type="submit" class="btn btn-primary" form="categoryForm">Save changes</button>
				</div>
			</div>
		</div>
	</div>

	{% for message in app.flashes('success') %}
		<div class="alert alert-success">{{ message }}</div>
	{% endfor %}
{% endblock %}

